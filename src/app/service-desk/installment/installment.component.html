<section>
    <main class="main" *ngFor="let i of testObject | slice: 1:2">
        <div class="background first_background">
            <div class="outer_container general_info">
                <div class="form">
                    <div class="form-item">
                        <input type="text" name="viewBill.value" class="form-input" [(ngModel)]="i.amount" disabled>
                        <i *ngIf="spinnerBoolean" class="loader"></i>
                    </div>
                    <div class="div1">
                        <p>مشترک گرامی</p>
                        <div class="div2">
                        </div>
                    </div>
                </div>
                <div class="form">
                    <div class="form-item inputcontainer">
                        <input type="text" readonly name="viewBill.value" class="form-input" [(ngModel)]="i.billId"
                            disabled>
                        <i *ngIf="spinnerBoolean" class="loader"></i>
                    </div>
                    <div class="div1">
                        <p>شناسه قبض</p>
                        <div class="div2">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <main class="main" *ngFor="let i of testObject; let indexN = index " data-aos="fade-up">

        <div class="background first_background" *ngIf="!i.isPayed">
            <div class="counts_number">
                {{indexN+1}}
            </div>

            <div class="outer_container">
                <div class="form">
                    <div class="form-item">
                        <input type="text" readonly name="viewBill.value" class="form-input" [(ngModel)]="i.paymentId"
                            disabled>
                        <i *ngIf="spinnerBoolean" class="loader"></i>
                    </div>
                    <div class="div1">
                        <p>شناسه پرداخت</p>
                        <div class="div2">
                        </div>
                    </div>
                </div>
                <div class="form">
                    <div class="form-item">
                        <input type="text" readonly name="viewBill.value" class="form-input" [(ngModel)]="i.amount"
                            disabled>
                        <i *ngIf="spinnerBoolean" class="loader"></i>
                    </div>
                    <div class="div1">
                        <p>مبلغ قابل پرداخت</p>
                        <div class="div2">
                        </div>
                    </div>
                </div>
                <div class="form">
                    <div class="form-item">
                        <input type="text" readonly name="viewBill.value" class="form-input"
                            [(ngModel)]="i.deadlineDate" disabled>
                        <i *ngIf="spinnerBoolean" class="loader"></i>
                    </div>
                    <div class="div1">
                        <p>مهلت پرداخت</p>
                        <div class="div2">
                        </div>
                    </div>
                </div>

            </div>
            <div class="customers">
                <label class="dynamic_checkbox">
                    <input type="checkbox" (change)="CalcInstallmentAmount(i.amount , $event)">
                    <span class="checkmark"></span>
                </label>
            </div>
        </div>

    </main>

    <section class="check_moreinfo">
        <button (click)="showMoreButtonClicked()">
            {{showMoreButton? 'فقط اقساط پرداخت نشده': 'مشاهده اقساط پرداخت شده'}}
            <i class="{{showMoreButton? 'fa fa-chevron-up': 'fa fa-chevron-down'}}"></i></button>
    </section>

    <div *ngIf="showMoreButton">
        <main class="main" *ngFor="let i of testObject">
            <div class="background first_background" *ngIf="i.isPayed && showMoreButton">
                <div class="outer_container">
                    <div class="form">
                        <div class="form-item">
                            <input type="text" name="viewBill.value" class="form-input" value="{{i.amount}}" disabled>
                            <i *ngIf="spinnerBoolean" class="loader"></i>
                        </div>
                        <div class="div1">
                            <p>مشترک گرامی</p>
                            <div class="div2">
                            </div>
                        </div>
                    </div>
                    <div class="form">
                        <div class="form-item inputcontainer">
                            <input type="text" name="viewBill.value" class="form-input" value="{{i.billId}}" disabled>
                            <i *ngIf="spinnerBoolean" class="loader"></i>
                        </div>
                        <div class="div1">
                            <p>شناسه قبض</p>
                            <div class="div2">
                            </div>
                        </div>
                    </div>
                    <div class="form">
                        <div class="form-item">
                            <input type="text" name="viewBill.value" class="form-input" [(ngModel)]="i.deadLine"
                                disabled>
                            <i *ngIf="spinnerBoolean" class="loader"></i>
                        </div>
                        <div class="div1 payed_button">
                            <p>پرداخت شده</p>
                            <div class="div2">
                            </div>
                        </div>
                    </div>

                </div>
                <div class="customers">
                    <label class="dynamic_checkbox">
                        <input type="checkbox" checked="checked" disabled>
                        <span class="checkmark payed_installments"></span>
                    </label>
                </div>
            </div>
        </main>
    </div>
</section>

<footer *ngIf="sumOfInstallments != 0">
    <div class="pay">
        {{sumOfInstallments}}
    </div>
    <div class="text">
        پرداخت مبلغ
    </div>
</footer>