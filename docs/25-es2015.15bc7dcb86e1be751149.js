(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"91V+":function(t,n,e){"use strict";e.r(n),e.d(n,"MetterAnnounceModule",(function(){return O}));var i=e("PCNd"),r=e("tyNb"),o=e("mrSG"),s=e("zD6u"),c=e("XzyZ"),a=e("zZuk"),m=e("ysRA"),g=e("z9Me"),h=e("fXoL"),b=e("3Pt+"),d=e("ofXK"),u=e("mqu9");function l(t,n){if(1&t&&(h.Pb(0,"article"),h.Pb(1,"p"),h.vc(2),h.Ob(),h.Ob()),2&t){const t=h.Zb();h.zb(2),h.wc(t.$textError)}}function p(t,n){1&t&&h.Lb(0,"app-spinner-wrapper")}const f=[{path:"",component:(()=>{class t extends g.a{constructor(t,n,e,i){super(),this.errorHandler=t,this.viewBillService=n,this.interactionService=e,this.spinnerWrapper=i,this.mobileNumber="",this.notification=!1,this._showMessage=!1,this._clickableButton=!0,this.maxLength=5,this.minLength=1,this.mobileLength=11,this.persianCharacters=()=>new Promise(t=>{this.kontorNumber=this.persianToEngNumbers(this.kontorNumber),this.mobileNumber=this.persianToEngNumbers(this.mobileNumber),t(this.mobileNumber)}),this.pushOrPopFromMobileNumber=()=>{const t=[];return!!this.mobileNumber.toString().startsWith("09")||!!this.mobileNumber.toString().startsWith("9")&&(t.push(0),t.push(this.mobileNumber),this.mobileNumber=t.join(""),!0)},this.validInput1=()=>this.numbersValidation(this.kontorNumber)?!(null===this.kontorNumber||this.kontorNumber.toString().length>this.maxLength||this.kontorNumber.toString().length<this.minLength)||(this.errorHandler.customToaster(4e3,"\u0634\u0645\u0627\u0631\u0647 \u06a9\u0646\u062a\u0648\u0631 \u0627\u0634\u062a\u0628\u0627\u0647 \u0627\u0633\u062a"),!1):(this.errorHandler.customToaster(5e3,"\u0634\u0645\u0627\u0631\u0647 \u06a9\u0646\u062a\u0648\u0631 \u0627\u0634\u062a\u0628\u0627\u0647 \u0627\u0633\u062a"),!1),this.validInput2=()=>this.numbersValidation(this.mobileNumber)?!(!this.pushOrPopFromMobileNumber()||null===this.mobileNumber.toString().trim()||this.mobileNumber.toString().trim().length>this.mobileLength||this.mobileNumber.toString().trim().length<this.mobileLength)||(this.errorHandler.customToaster(4e3,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0627\u0634\u062a\u0628\u0627\u0647 \u0627\u0633\u062a"),!1):(this.errorHandler.customToaster(5e3,"\u0634\u0645\u0627\u0631\u0647 \u0645\u0648\u0628\u0627\u06cc\u0644 \u0627\u0634\u062a\u0628\u0627\u0647 \u0627\u0633\u062a"),!1),this.checkValidInput=()=>!(!this.validInput1()||!this.validInput2()),this.connectToServer=()=>new Promise(t=>t(this.viewBillService.setMetterAnnounce(this.getedDataIdFromRoute,this.kontorNumber,this.mobileNumber).subscribe(t=>{t&&(this.errorHandler.toasterError("\u0642\u0628\u0636 \u0622\u0628 \u0628\u0647\u0627 \u0628\u0631\u0627\u06cc \u0634\u0645\u0627 \u067e\u06cc\u0627\u0645\u06a9 \u062e\u0648\u0627\u0647\u062f \u0634\u062f","\u0628\u0627 \u062a\u0634\u06a9\u0631 \u0627\u0632 \u0627\u0639\u0644\u0627\u0645 \u0634\u0645\u0627\u0631\u0647 \u06a9\u0646\u062a\u0648\u0631 \u062e\u0648\u062f"),this.errorHandler.timeOutBeforeRoute("r/s/gb"))}))),this.spinnerCondition=t=>{this.spinnerWrapper.loadingStatus$.subscribe(t=>{this._clickableButton=t,this.notification=t})},this.createSpinner=t=>{t?this.spinnerWrapper.startLoading():this.spinnerWrapper.stopLoading()},this.spinnerChecker=t=>new Promise(n=>n(this.createSpinner(t))),this.changeToDefaultBeforeResponse=()=>{this.interactionService.setmetterAnnounce(""),this.spinnerChecker(!0)},this.nestingLevel=()=>Object(o.a)(this,void 0,void 0,(function*(){yield this.persianCharacters(),this.changeToDefaultBeforeResponse();const t=this.checkValidInput();console.log(t),yield this.spinnerChecker(t),this.spinnerCondition(t),t&&(yield this.connectToServer().catch(t=>console.log(t)))}))}onkeyUpHandler(t){"Enter"!==t.key&&"NumpadEnter"!==t.key||this.nestingLevel()}ngOnInit(){this.unSubErrorText=this.interactionService.metterAnnounceErrorText$.subscribe(t=>{t&&(this.$textError=t,this._showMessage=!0,this.$textError&&this.spinnerChecker(!1))})}ngOnDestroy(){this.unSubErrorText.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(h.Kb(a.a),h.Kb(c.a),h.Kb(s.a),h.Kb(m.a))},t.\u0275cmp=h.Eb({type:t,selectors:[["app-metter-announce"]],hostBindings:function(t,n){1&t&&h.Xb("keyup",(function(t){return n.onkeyUpHandler(t)}),!1,h.nc)},features:[h.wb],decls:26,vars:4,consts:[[1,"title_content"],[1,"main_img"],["src","assets/imgs/ma/waterMeter.png","alt",""],[1,"main"],[1,"form"],[1,"form-item"],["type","text","name","metterAnnounce","title","\u0634\u0645\u0627\u0631\u0647 \u06a9\u0646\u062a\u0648\u0631 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f","maxlength","5","placeholder"," \u0634\u0645\u0627\u0631\u0647 \u06a9\u0646\u062a\u0648\u0631","required","",1,"form-input",3,"ngModel","ngModelChange"],[1,"div1"],[1,"div2"],["type","text","name","mobileNumber","title","\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647 \u062e\u0648\u062f \u0631\u0627 \u0648\u0627\u0631\u062f \u06a9\u0646\u06cc\u062f","maxlength","11","placeholder"," \u062a\u0644\u0641\u0646 \u0647\u0645\u0631\u0627\u0647","required","",1,"form-input",3,"ngModel","ngModelChange"],[1,"_button",3,"click"],[1,"fa","fa-search"],[4,"ngIf"]],template:function(t,n){1&t&&(h.Pb(0,"section"),h.Pb(1,"div",0),h.Pb(2,"h1"),h.vc(3,"\u0627\u0639\u0644\u0627\u0645 \u06a9\u0627\u0631\u06a9\u0631\u062f \u06a9\u0646\u062a\u0648\u0631 \u0648 \u0642\u0628\u0636 \u0645\u06cc\u0627\u0646\u062f\u0648\u0631\u0647"),h.Ob(),h.Ob(),h.Pb(4,"div",1),h.Lb(5,"img",2),h.Ob(),h.Pb(6,"main",3),h.Pb(7,"div",4),h.Pb(8,"div",5),h.Pb(9,"input",6),h.Xb("ngModelChange",(function(t){return n.kontorNumber=t})),h.Ob(),h.Ob(),h.Pb(10,"div",7),h.Pb(11,"p"),h.vc(12,"\u0634\u0645\u0627\u0631\u0647 \u06a9\u0646\u062a\u0648\u0631"),h.Ob(),h.Lb(13,"div",8),h.Ob(),h.Ob(),h.Pb(14,"div",4),h.Pb(15,"div",5),h.Pb(16,"input",9),h.Xb("ngModelChange",(function(t){return n.mobileNumber=t})),h.Ob(),h.Ob(),h.Pb(17,"div",7),h.Pb(18,"p"),h.vc(19,"\u0634\u0645\u0627\u0631\u0647 \u0647\u0645\u0631\u0627\u0647"),h.Ob(),h.Lb(20,"div",8),h.Ob(),h.Ob(),h.Pb(21,"button",10),h.Xb("click",(function(){return n.nestingLevel()})),h.vc(22," \u0635\u062f\u0648\u0631 \u0642\u0628\u0636 "),h.Lb(23,"p",11),h.Ob(),h.Ob(),h.tc(24,l,3,1,"article",12),h.Ob(),h.tc(25,p,1,0,"app-spinner-wrapper",12)),2&t&&(h.zb(9),h.cc("ngModel",n.kontorNumber),h.zb(7),h.cc("ngModel",n.mobileNumber),h.zb(8),h.cc("ngIf",n._showMessage),h.zb(1),h.cc("ngIf",n.notification))},directives:[b.a,b.f,b.n,b.h,b.j,d.j,u.a],styles:['.hr_1[_ngcontent-%COMP%]{margin-bottom:1.5rem;height:.4rem}.hr_1[_ngcontent-%COMP%], .hr_2[_ngcontent-%COMP%]{width:70%;border-radius:30px;background:#eee}.hr_2[_ngcontent-%COMP%]{opacity:.7;margin:2.5rem auto;height:.2rem}a[_ngcontent-%COMP%]:active, a[_ngcontent-%COMP%]:focus, a[_ngcontent-%COMP%]:hover{outline:none}.form[_ngcontent-%COMP%]{display:flex;flex-direction:row;box-shadow:5px 0 20px rgba(0,0,0,.2);height:3rem;width:3rem;overflow:hidden;width:95%;margin:.3rem auto;border-radius:3em}.form[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column;width:52%;height:auto;flex-grow:1;background:#d3d3d3}.form[_ngcontent-%COMP%]   .form-button[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{font-family:inherit;border-radius:inherit;font-weight:600}.form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{padding:0 1rem;font-family:inherit;outline:none;text-align:right;font-size:1.44rem;height:10rem;border-radius:30px;z-index:1;width:100%}.form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::-webkit-inner-spin-button, .form[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.form[_ngcontent-%COMP%]   .form-input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.form[_ngcontent-%COMP%]   .form-button[_ngcontent-%COMP%]{background:#00368c;font-size:1rem;margin-left:auto;color:#fff;border:0;min-width:7rem;padding:0}.div1[_ngcontent-%COMP%]{position:relative;height:100%;border-radius:0 30px 30px 0;padding:10px;background:#004ecc;width:48%}.div1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{flex-direction:row;color:#fff;line-height:2;width:86%;margin:auto;transform:translate(2px,-5px);font-size:1.1rem;font-weight:900}.div1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .div2[_ngcontent-%COMP%]{position:absolute}.div2[_ngcontent-%COMP%]{padding:19px;height:8px;width:8px;border-radius:0 50px;background:#d3d3d3;transform:rotate(45deg);transform-origin:21% -55%}section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   ._button[_ngcontent-%COMP%]{color:#fff;font-size:1.4rem;line-height:1.5;font-weight:700;font-family:inherit;padding:.375rem .75rem;height:3rem;min-width:20rem;width:93%;outline:none;border-radius:30px;background-color:#116fff;box-shadow:0 0 10px rgba(17,111,255,.5);margin-bottom:.9rem;cursor:pointer;display:flex;place-items:center;align-items:center;justify-content:center;place-content:space-evenly}@media screen and (max-width:414px){section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   ._button[_ngcontent-%COMP%]{font-size:1.3rem}}section[_ngcontent-%COMP%]{display:grid;grid-template-areas:"header" "main" "footer";grid-template-rows:5rem 1fr auto;background:#062c68;min-height:20rem;border-radius:30px;text-align:center;align-items:center;justify-content:center}section[_ngcontent-%COMP%]   .title_content[_ngcontent-%COMP%]{grid-area:header;color:#d3d3d3;font-weight:600;font-size:1.1rem}section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%], section[_ngcontent-%COMP%]   .main_img[_ngcontent-%COMP%]{grid-area:main;margin:auto}section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{--background:#f3f3f3}section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .div2[_ngcontent-%COMP%]{background:var(--background)}section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   ._button[_ngcontent-%COMP%]{background:#56c35a;color:#eee;margin:1.5rem auto}section[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   ._button[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;background:#51a351;border-radius:50%;padding:.3rem}section[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]{grid-area:footer;--dark_background:#091c3b;--border_color:#ff1408;background:var(--dark_background);box-shadow:2px 2px 7px 0 var(--border_color);margin:-4rem auto 2rem;border-radius:30px;border:3px solid var(--border_color);min-height:14rem;width:80%}section[_ngcontent-%COMP%]   article[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;font-size:1.44rem;padding:.5rem;text-align:right}.form[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]{background:#f3f3f3}@media (min-width:550px){.main_img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30rem}article[_ngcontent-%COMP%]{min-height:11rem;width:97%}}']}),t})()}];let P=(()=>{class t{}return t.\u0275mod=h.Ib({type:t}),t.\u0275inj=h.Hb({factory:function(n){return new(n||t)},imports:[[r.f.forChild(f)],r.f]}),t})(),O=(()=>{class t{}return t.\u0275mod=h.Ib({type:t}),t.\u0275inj=h.Hb({factory:function(n){return new(n||t)},imports:[[i.a,P]]}),t})()}}]);